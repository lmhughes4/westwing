<html>

<head>
<title>Visitor Cycle</title>
</head>

<body>

<h1>Visitor Cycle</h1>

<table border="1">
    <tr>
        <td>com.jeantessier.dependency.CycleDetectorFixture</td>
    </tr>
</table>

<h2>Setup</h2>

<img src="../../files/images/VisitorPattern.gif" alt="Class diagram"/>

<p>Create the nodes</p>

<table border="1">
    <tr>
        <td>create</td>
        <td>BaseClass</td>
        <td>class</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>BaseClass.accept(Visitor)</td>
        <td>feature</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>ClassA</td>
        <td>class</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>ClassA.accept(Visitor)</td>
        <td>feature</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>ClassB</td>
        <td>class</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>ClassB.accept(Visitor)</td>
        <td>feature</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>Visitor</td>
        <td>class</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>Visitor.visitClassA(ClassA)</td>
        <td>feature</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>create</td>
        <td>Visitor.visitClassB(ClassB)</td>
        <td>feature</td>
    </tr>
</table>

<p>Create the dependencies.</p>

<table border="1">
    <tr>
        <td>source</td>
        <td>BaseClass.accept(Visitor)</td>
        <td>depends on</td>
        <td>Visitor</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassA</td>
        <td>depends on</td>
        <td>BaseClass</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassA.accept(Visitor)</td>
        <td>depends on</td>
        <td>Visitor</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassA.accept(Visitor)</td>
        <td>depends on</td>
        <td>Visitor.visitClassA(ClassA)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassB</td>
        <td>depends on</td>
        <td>BaseClass</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassB.accept(Visitor)</td>
        <td>depends on</td>
        <td>Visitor</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>ClassB.accept(Visitor)</td>
        <td>depends on</td>
        <td>Visitor.visitClassB(ClassB)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>Visitor.visitClassA(ClassA)</td>
        <td>depends on</td>
        <td>ClassA</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>source</td>
        <td>Visitor.visitClassB(ClassB)</td>
        <td>depends on</td>
        <td>ClassB</td>
    </tr>
</table>

<h2>Exercise</h2>

<table border="1">
    <tr>
        <td>detect cycles</td>
    </tr>
</table>

<h2>Verify</h2>

<p>Check number of cycles and their length</p>

<table border="1">
    <tr>
        <td>cycles</td>
    </tr>
    <tr>
        <td><i>length</i></td>
    </tr>
    <tr>
        <td>3</td>
    </tr>
    <tr>
        <td>3</td>
    </tr>
    <tr>
        <td>4</td>
    </tr>
    <tr>
        <td>4</td>
    </tr>
    <tr>
        <td>5</td>
    </tr>
    <tr>
        <td>5</td>
    </tr>
</table>

<p>Check individual cycles</p>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>0</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">ClassA</td>
    </tr>
    <tr>
        <td colspan="2">ClassA.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassA(ClassA)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>1</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">ClassB</td>
    </tr>
    <tr>
        <td colspan="2">ClassB.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassB(ClassB)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>2</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">ClassA</td>
    </tr>
    <tr>
        <td colspan="2">ClassA.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassA(ClassA)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>3</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">ClassB</td>
    </tr>
    <tr>
        <td colspan="2">ClassB.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassB(ClassB)</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>4</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">BaseClass</td>
    </tr>
    <tr>
        <td colspan="2">BaseClass.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassA(ClassA)</td>
    </tr>
    <tr>
        <td colspan="2">ClassA</td>
    </tr>
</table>

<table border="1">
    <tr>
        <td>path for cycle</td>
        <td>5</td>
    </tr>
    <tr>
        <td colspan="2"><i>name</i></td>
    </tr>
    <tr>
        <td colspan="2">BaseClass</td>
    </tr>
    <tr>
        <td colspan="2">BaseClass.accept(Visitor)</td>
    </tr>
    <tr>
        <td colspan="2">Visitor</td>
    </tr>
    <tr>
        <td colspan="2">Visitor.visitClassB(ClassB)</td>
    </tr>
    <tr>
        <td colspan="2">ClassB</td>
    </tr>
</table>

<hr/>

<table border="1">
    <tr>
        <td colspan="3">fit.Summary</td>
    </tr>
</table>

</body>

</html>